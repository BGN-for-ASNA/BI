# Interaction Term between Two Continuous Variables
## General Principles
To study relationships between two independent continuous variables and their interaction effect on a dependent variable (e.g., temperature and humidity affecting energy consumption), we can use Regression Analysis with Interaction Terms. In this approach, we extend the simple linear regression model to include an interaction term (a multiplication) between the two continuous variables.

[comment]: <> (Example to change)

Parallel lines indicate that there is no interaction effect while different slopes suggest that one might be present. Below is the plot for Food x Condiment. The crossed lines on the graph suggest that there is an interaction effect, which the significant p-value for the Food*Condiment term confirms. The graph shows that enjoyment levels are higher for chocolate sauce when the food is ice cream. Conversely, satisfaction levels are higher for mustard when the food is a hot dog. If you put mustard on ice cream or chocolate sauce on hot dogs, you wonâ€™t be happy!

![Picture](https://i0.wp.com/statisticsbyjim.com/wp-content/uploads/2017/10/interactions_plot_categorical.png?w=576&ssl=1)

## Considerations
- We have the same considerations as for [Regression for continuous variable](1.&#32;Linear&#32;Regression&#32;for&#32;continuous&#32;variable.md).

- Model relationship between Y and R to vary as a function of A. you explicitly model the hypothesis that the slope between Y and R dependsâ€”is conditionalâ€”upon A.

- For continuous interactions, the intercept becomes the grand mean of the outcome variable. This ease of interpretation alone is a good reason to center predictor variables.

- Estimate interpretation is more difficult as estimate of non-interaction terms become expected change in Y when R increases by one unit and A is at its average value and estimate of interaction terms are expected change in the influence of A on Y when increasing R by one unit and expected change in the influence of R on Y when increasing A by one unit.

- [Triptych ğŸ›ˆ](bi\doc\3.%20%Interaction%20%between%20%continuous%20%variables.md "Three panels arranged side by side to compare multiple datasets or conditions simultaneously. Each panel often represents a different aspect of the data or a different dataset, allowing for easy comparison and analysis. They are particularly useful for displaying complex relationships or patterns across multiple variables or experimental conditions.") plots are very handy for understanding the impact of interactions.


## Example
Below is an example code snippet demonstrating Bayesian regression with an interaction term between two continuous variables with the Bayesian Inference (BI) package:

```python
from BI import bi.hard
d = pd.read_csv('/home/sosa/BI/data/tulips.csv', sep = ';')
d["blooms_std"] = d.blooms / d.blooms.max()
d["water_cent"] = d.water - d.water.mean()
d["shade_cent"] = d.shade - d.shade.mean()

water_cent = jnp.array(d.water_cent.values)
blooms_std = jnp.array(d.blooms_std.values)
shade_cent = jnp.array(d.shade_cent.values)

def model():
    sigma = yield exponential(1, 1)
    beta1 = yield normal(1,  0 , 0.25 )
    beta2 = yield normal(1,  0 , 0.25 )
    beta3 = yield normal(1,  0 , 0.25 )
    alpha = yield normal(1,  0.5 , 0.25 )
    mu = alpha + beta1 * water_cent + beta2 * shade_cent + beta3 * water_cent * shade_cent
    y = yield tfd.Independent(tfd.Normal(mu, sigma), reinterpreted_batch_ndims=1)

posterior, sample_stats = NUTSdual(model, 
                                    obs = jnp.array(d.blooms_std.values)) # define the dependent variable 
```

## Mathematical Details
## *Formula*
We model the relationship between the input features (X1 and X2) and the target variable (Y) using the following equation:
$$
ğ‘Œ = \alpha + \beta_1*ğ‘‹_1âˆ—+\beta_2*ğ‘‹_2+\\beta_{interaction}*ğ‘‹_1âˆ—ğ‘‹_2 + ğœ–
$$

Where:

- $Y$ is the target variable.
- $X_1$ and $X_2$ are the input continuous variables.
- $\beta_1$ and $\beta_2$ are the regression coefficients for $X_1$ and $X_2$, respectively.
- $\beta_{interaction}$ is the regression coefficient for the interaction term $(X_1 * X_2)$.
- $\alpha$ is the intercept term.
- $\epsilon$ is the error term assumed to be normally distributed.

In this context, the interaction term $X_1 * X_2$ captures the joint effect of $X_1$ and $X_2$ on the target variable $Y$.

### *Bayesian model*
We can express the Bayesian regression model with an interaction term between two continuous variables using probability distributions as follows:
$$
p(Yâˆ£X_1â€‹ ,X_2â€‹ , \beta_1, \beta_2, \beta_{interaction} ) = \\Normal(\alpha +  \beta_1 * X_1â€‹ + \beta_1 - X_2â€‹â€‹ + \beta_{interaction} * X_1â€‹ âˆ—X_2â€‹ ,ÏƒÂ² )\\
ğ‘(\alpha)=Normal(0,1)\\
ğ‘(\beta_1)=Normal(0,1)\\
ğ‘(\beta_2)=Normal(0,1)\\
ğ‘(\beta_{interaction})=Normal(0,1)\\
ğ‘(ÏƒÂ²)=Exponential(1)\\
$$

Where:

- $p(Y | X_1â€‹ ,X_2â€‹ , \beta_1, \beta_2, \beta_{interaction})$ is the likelihood function.
- $p(\alpha)$ and $p(b)$ is the prior distribution for the intercept
- $p(\beta_1)$,  $p(\beta_2)$ and $\beta_{interaction}$ are the prior distributions for the regression coefficients.
- $p(\sigma^2)$ is the prior distribution for the standard deviation, ensuring it is positive.

## Reference(s)